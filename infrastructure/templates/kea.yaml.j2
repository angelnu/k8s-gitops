{
	"Dhcp4": {
		"interfaces-config": {
			"interfaces": [
				"eth0"
			]
		},

        "host-reservation-identifiers": [
            "hw-address"
        ],

		"expired-leases-processing": {
			"reclaim-timer-wait-time": 10,
			"flush-reclaimed-timer-wait-time": 25,
			"hold-reclaimed-time": 3600,
			"max-reclaim-leases": 100,
			"max-reclaim-time": 250,
			"unwarned-reclaim-cycles": 5
		},
		"renew-timer": 900,
		"rebind-timer": 1800,
		"valid-lifetime": 3600,
		"option-data": [
			{
				"name": "domain-name-servers",
				"data": "{{ resolver }}"
			},
			{
				"name": "domain-name",
				"data": "{{ domain }}"
			},
			{
				"name": "domain-search",
				"data": "{{ domain }}"
			}
		],
		"subnet4": [
			{
				"id": 1,
				"subnet": "{{ lab_cidr }}",
				"pools": [
					{
						"pool": "{{ lab_dhcp_start }} - {{ lab_dhcp_stop }}"
					}
				],
				"option-data": [
					{
						"name": "routers",
						"data": "{{ lab_gw }}"
					}
				],
                "reservations": [
                    {% for cluster_name, cluster in clusters.items() %}
					{% for machine in  cluster.masters + cluster.workers %}
                    {
                    "hostname": "{{ cluster_name }}-{{ loop.index0 }}",
                    "hw-address": "{{ machine.macaddr }}",
                    "ip-address": "{{ machine.ip }}",
                    "boot-file-name": "http://{{ service.ip }}:8080/{{ cluster_name }}/agent.x86_64.ipxe"
                    },
                    {% endfor %}
					{% endfor %}
                ]
			}
		],
		"loggers": [
			{
				"name": "kea-dhcp4",
				"output_options": [
					{
						"output": "stdout",
						"pattern": "%-5p %m\\n"
					}
				],
				"severity": "INFO",
				"debuglevel": 60
			}
		]
	}
}